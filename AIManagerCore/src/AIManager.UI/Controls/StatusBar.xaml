<UserControl x:Class="AIManager.UI.Controls.StatusBar"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             Height="32">
    <Border>
        <Border.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                <GradientStop Color="#40000000" Offset="0"/>
                <GradientStop Color="#30000000" Offset="0.5"/>
                <GradientStop Color="#40000000" Offset="1"/>
            </LinearGradientBrush>
        </Border.Background>
        <Border.Effect>
            <DropShadowEffect Color="#000000" BlurRadius="10" ShadowDepth="-2" Direction="90" Opacity="0.3"/>
        </Border.Effect>

        <Grid Margin="15,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Left: Service Status Icons -->
            <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                <!-- Ollama Status -->
                <Border x:Name="OllamaStatus" ToolTip="Ollama (LLM)" Margin="0,0,15,0" Cursor="Hand"
                        MouseLeftButtonDown="OllamaStatus_Click">
                    <StackPanel Orientation="Horizontal">
                        <Ellipse x:Name="OllamaIndicator" Width="8" Height="8" Fill="#9E9E9E"/>
                        <TextBlock Text="Ollama" FontSize="11" Margin="6,0,0,0" Opacity="0.8"/>
                    </StackPanel>
                </Border>

                <!-- ComfyUI Status -->
                <Border x:Name="ComfyStatus" ToolTip="ComfyUI (Image/Video)" Margin="0,0,15,0" Cursor="Hand"
                        MouseLeftButtonDown="ComfyStatus_Click">
                    <StackPanel Orientation="Horizontal">
                        <Ellipse x:Name="ComfyIndicator" Width="8" Height="8" Fill="#9E9E9E"/>
                        <TextBlock Text="ComfyUI" FontSize="11" Margin="6,0,0,0" Opacity="0.8"/>
                    </StackPanel>
                </Border>

                <!-- HuggingFace Status -->
                <Border x:Name="HFStatus" ToolTip="HuggingFace" Margin="0,0,15,0" Cursor="Hand"
                        MouseLeftButtonDown="HFStatus_Click">
                    <StackPanel Orientation="Horizontal">
                        <Ellipse x:Name="HFIndicator" Width="8" Height="8" Fill="#9E9E9E"/>
                        <TextBlock x:Name="TxtHFStatus" Text="HuggingFace" FontSize="11" Margin="6,0,0,0" Opacity="0.8"/>
                    </StackPanel>
                </Border>

                <!-- GPU Status -->
                <Border x:Name="GpuStatus" ToolTip="GPU Provider" Margin="0,0,15,0" Cursor="Hand"
                        MouseLeftButtonDown="GpuStatus_Click">
                    <StackPanel Orientation="Horizontal">
                        <materialDesign:PackIcon Kind="Gpu" Width="14" Height="14" Opacity="0.6" VerticalAlignment="Center"/>
                        <TextBlock x:Name="TxtGpuStatus" Text="No GPU" FontSize="11" Margin="4,0,0,0" Opacity="0.8"/>
                    </StackPanel>
                </Border>

                <!-- Backend Status -->
                <Border x:Name="BackendStatus" ToolTip="Laravel Backend" Margin="0,0,15,0" Cursor="Hand"
                        MouseLeftButtonDown="BackendStatus_Click">
                    <StackPanel Orientation="Horizontal">
                        <Ellipse x:Name="BackendIndicator" Width="8" Height="8" Fill="#9E9E9E"/>
                        <TextBlock Text="Backend" FontSize="11" Margin="6,0,0,0" Opacity="0.8"/>
                    </StackPanel>
                </Border>

                <!-- Separator -->
                <Border Width="1" Height="16" Background="#30FFFFFF" Margin="5,0,15,0"/>

                <!-- Current Activity -->
                <StackPanel Orientation="Horizontal" x:Name="ActivityPanel" Visibility="Collapsed">
                    <ProgressBar IsIndeterminate="True" Width="60" Height="4"
                                 Style="{StaticResource MaterialDesignLinearProgressBar}"/>
                    <TextBlock x:Name="TxtActivity" Text="" FontSize="11" Margin="8,0,0,0" Opacity="0.8"/>
                </StackPanel>
            </StackPanel>

            <!-- Center: Current Task (if any) -->
            <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,20,0">
                <TextBlock x:Name="TxtCurrentTask" Text="" FontSize="11" Opacity="0.6" MaxWidth="300"
                           TextTrimming="CharacterEllipsis"/>
            </StackPanel>

            <!-- Right: System Info -->
            <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                <!-- Memory Usage -->
                <StackPanel Orientation="Horizontal" Margin="0,0,15,0">
                    <materialDesign:PackIcon Kind="Memory" Width="14" Height="14" Opacity="0.5" VerticalAlignment="Center"/>
                    <TextBlock x:Name="TxtMemory" Text="-- MB" FontSize="11" Margin="4,0,0,0" Opacity="0.7"/>
                </StackPanel>

                <!-- GPU Memory (if available) -->
                <StackPanel x:Name="VramPanel" Orientation="Horizontal" Margin="0,0,15,0" Visibility="Collapsed">
                    <materialDesign:PackIcon Kind="Gpu" Width="14" Height="14" Opacity="0.5" VerticalAlignment="Center"/>
                    <TextBlock x:Name="TxtVram" Text="-- MB" FontSize="11" Margin="4,0,0,0" Opacity="0.7"/>
                </StackPanel>

                <!-- Version -->
                <TextBlock x:Name="TxtVersion" Text="v1.0.0" FontSize="10" Opacity="0.4" VerticalAlignment="Center"/>
            </StackPanel>
        </Grid>
    </Border>
</UserControl>
