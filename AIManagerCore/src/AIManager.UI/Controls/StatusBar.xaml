<UserControl x:Class="AIManager.UI.Controls.StatusBar"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             Height="32">
    <Border>
        <Border.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                <GradientStop Color="#40000000" Offset="0"/>
                <GradientStop Color="#30000000" Offset="0.5"/>
                <GradientStop Color="#40000000" Offset="1"/>
            </LinearGradientBrush>
        </Border.Background>
        <Border.Effect>
            <DropShadowEffect Color="#000000" BlurRadius="10" ShadowDepth="-2" Direction="90" Opacity="0.3"/>
        </Border.Effect>

        <Grid Margin="15,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Left: Service Status Icons -->
            <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                <!-- Ollama Status -->
                <Border x:Name="OllamaStatus" ToolTip="Ollama (LLM)" Margin="0,0,15,0" Cursor="Hand"
                        MouseLeftButtonDown="OllamaStatus_Click">
                    <StackPanel Orientation="Horizontal">
                        <Ellipse x:Name="OllamaIndicator" Width="8" Height="8" Fill="#9E9E9E"/>
                        <TextBlock Text="Ollama" FontSize="11" Margin="6,0,0,0" Opacity="0.8"/>
                    </StackPanel>
                </Border>

                <!-- ComfyUI Status -->
                <Border x:Name="ComfyStatus" ToolTip="ComfyUI (Image/Video)" Margin="0,0,15,0" Cursor="Hand"
                        MouseLeftButtonDown="ComfyStatus_Click">
                    <StackPanel Orientation="Horizontal">
                        <Ellipse x:Name="ComfyIndicator" Width="8" Height="8" Fill="#9E9E9E"/>
                        <TextBlock Text="ComfyUI" FontSize="11" Margin="6,0,0,0" Opacity="0.8"/>
                    </StackPanel>
                </Border>

                <!-- HuggingFace Status -->
                <Border x:Name="HFStatus" ToolTip="HuggingFace" Margin="0,0,15,0" Cursor="Hand"
                        MouseLeftButtonDown="HFStatus_Click">
                    <StackPanel Orientation="Horizontal">
                        <Ellipse x:Name="HFIndicator" Width="8" Height="8" Fill="#9E9E9E"/>
                        <TextBlock x:Name="TxtHFStatus" Text="HuggingFace" FontSize="11" Margin="6,0,0,0" Opacity="0.8"/>
                    </StackPanel>
                </Border>

                <!-- GPU Status -->
                <Border x:Name="GpuStatus" ToolTip="GPU Provider" Margin="0,0,15,0" Cursor="Hand"
                        MouseLeftButtonDown="GpuStatus_Click">
                    <StackPanel Orientation="Horizontal">
                        <materialDesign:PackIcon Kind="Gpu" Width="14" Height="14" Opacity="0.6" VerticalAlignment="Center"/>
                        <TextBlock x:Name="TxtGpuStatus" Text="No GPU" FontSize="11" Margin="4,0,0,0" Opacity="0.8"/>
                    </StackPanel>
                </Border>

                <!-- Backend Status -->
                <Border x:Name="BackendStatus" ToolTip="Laravel Backend" Margin="0,0,15,0" Cursor="Hand"
                        MouseLeftButtonDown="BackendStatus_Click">
                    <StackPanel Orientation="Horizontal">
                        <Ellipse x:Name="BackendIndicator" Width="8" Height="8" Fill="#9E9E9E"/>
                        <TextBlock Text="Backend" FontSize="11" Margin="6,0,0,0" Opacity="0.8"/>
                    </StackPanel>
                </Border>

                <!-- Claude Code Status -->
                <Border x:Name="ClaudeStatus" ToolTip="Claude Code (AI Assistant)" Margin="0,0,15,0" Cursor="Hand"
                        MouseLeftButtonDown="ClaudeStatus_Click">
                    <StackPanel Orientation="Horizontal">
                        <Ellipse x:Name="ClaudeIndicator" Width="8" Height="8" Fill="#9E9E9E"/>
                        <TextBlock x:Name="TxtClaudeStatus" Text="Claude" FontSize="11" Margin="6,0,0,0" Opacity="0.8"/>
                        <!-- Token Usage Badge -->
                        <Border x:Name="TokenBadge" Background="#20FFFFFF" CornerRadius="8" Padding="6,1" Margin="4,0,0,0" Visibility="Collapsed">
                            <TextBlock x:Name="TxtTokenUsage" Text="0%" FontSize="9" Opacity="0.7"/>
                        </Border>
                    </StackPanel>
                </Border>

                <!-- Separator -->
                <Border Width="1" Height="16" Background="#30FFFFFF" Margin="5,0,15,0"/>

                <!-- Database Status -->
                <Border x:Name="DatabaseStatus" ToolTip="Database" Margin="0,0,10,0" Cursor="Hand">
                    <StackPanel Orientation="Horizontal">
                        <Ellipse x:Name="SqliteIndicator" Width="8" Height="8" Fill="#9E9E9E"/>
                        <TextBlock Text="SQLite" FontSize="11" Margin="6,0,0,0" Opacity="0.8"/>
                        <Border Background="#30FFFFFF" CornerRadius="3" Padding="4,1" Margin="4,0,0,0" Visibility="Collapsed" x:Name="MysqlBadge">
                            <StackPanel Orientation="Horizontal">
                                <Ellipse x:Name="MysqlIndicator" Width="6" Height="6" Fill="#9E9E9E"/>
                                <TextBlock Text="MySQL" FontSize="9" Margin="3,0,0,0" Opacity="0.7"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Border>

                <!-- Connections & Requests -->
                <Border Background="#20FFFFFF" CornerRadius="10" Padding="8,2" Margin="0,0,10,0">
                    <StackPanel Orientation="Horizontal">
                        <materialDesign:PackIcon Kind="Connection" Width="12" Height="12" Opacity="0.6" VerticalAlignment="Center"/>
                        <TextBlock x:Name="TxtConnections" Text="0" FontSize="10" Margin="3,0,0,0" Foreground="#4CAF50"/>
                    </StackPanel>
                </Border>

                <Border Background="#20FFFFFF" CornerRadius="10" Padding="8,2" Margin="0,0,10,0">
                    <StackPanel Orientation="Horizontal">
                        <materialDesign:PackIcon Kind="ArrowLeftRight" Width="12" Height="12" Opacity="0.6" VerticalAlignment="Center"/>
                        <TextBlock x:Name="TxtRequests" Text="0" FontSize="10" Margin="3,0,0,0" Foreground="#2196F3"/>
                    </StackPanel>
                </Border>

                <!-- Alerts Badge -->
                <Border x:Name="AlertsBadge" Background="#F44336" CornerRadius="10" Padding="6,2" Visibility="Collapsed"
                        Margin="0,0,10,0" Cursor="Hand" MouseLeftButtonDown="AlertsBadge_Click">
                    <StackPanel Orientation="Horizontal">
                        <materialDesign:PackIcon Kind="AlertCircle" Width="12" Height="12" VerticalAlignment="Center"/>
                        <TextBlock x:Name="TxtAlerts" Text="0" FontSize="10" Margin="3,0,0,0" FontWeight="Bold"/>
                    </StackPanel>
                </Border>

                <!-- Separator -->
                <Border Width="1" Height="16" Background="#30FFFFFF" Margin="0,0,10,0"/>

                <!-- Current Activity -->
                <StackPanel Orientation="Horizontal" x:Name="ActivityPanel" Visibility="Collapsed">
                    <ProgressBar IsIndeterminate="True" Width="60" Height="4"
                                 Style="{StaticResource MaterialDesignLinearProgressBar}"/>
                    <TextBlock x:Name="TxtActivity" Text="" FontSize="11" Margin="8,0,0,0" Opacity="0.8"/>
                </StackPanel>
            </StackPanel>

            <!-- Center: Spacer (AI Message moved to Header) -->
            <Border Grid.Column="1"/>

            <!-- Right: System Info -->
            <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                <!-- Memory Usage -->
                <StackPanel Orientation="Horizontal" Margin="0,0,15,0">
                    <materialDesign:PackIcon Kind="Memory" Width="14" Height="14" Opacity="0.5" VerticalAlignment="Center"/>
                    <TextBlock x:Name="TxtMemory" Text="-- MB" FontSize="11" Margin="4,0,0,0" Opacity="0.7"/>
                </StackPanel>

                <!-- GPU Memory (if available) -->
                <StackPanel x:Name="VramPanel" Orientation="Horizontal" Margin="0,0,15,0" Visibility="Collapsed">
                    <materialDesign:PackIcon Kind="Gpu" Width="14" Height="14" Opacity="0.5" VerticalAlignment="Center"/>
                    <TextBlock x:Name="TxtVram" Text="-- MB" FontSize="11" Margin="4,0,0,0" Opacity="0.7"/>
                </StackPanel>

                <!-- Separator -->
                <Border Width="1" Height="16" Background="#30FFFFFF" Margin="0,0,10,0"/>

                <!-- Copyright & Version -->
                <TextBlock Text="Â© 2025 Xman Studio" FontSize="10" Opacity="0.4" VerticalAlignment="Center" Margin="0,0,10,0"/>
                <TextBlock x:Name="TxtVersion" Text="v1.1.0" FontSize="10" Opacity="0.5" VerticalAlignment="Center" Foreground="#8B5CF6"/>
            </StackPanel>
        </Grid>
    </Border>
</UserControl>
